<style>
        {%- assign heading_font = settings.font_heading -%}
        {%- assign body_font = settings.font_body -%}
        
        :root {
          /* Font Families */
          --font-heading-family: {{ heading_font.family }}, {{ heading_font.fallback_families }};
          --font-body-family: {{ body_font.family }}, {{ body_font.fallback_families }};
          
          /* Font Weights */
          --font-weight-normal: {{ settings.font_weight_normal }};
          --font-weight-bold: {{ settings.font_weight_bold }};
          
          /* Font Sizes */
          --font-size-base: {{ settings.font_size_base }}px;
          --font-size-heading-large: {{ settings.font_size_heading_large }}px;
          --font-size-heading-medium: {{ settings.font_size_heading_medium }}px;
          --font-size-heading-small: {{ settings.font_size_heading_small }}px;
          
        }
      
      
        :root {
          --color-background: {{ settings.color_schemes.first.settings.background }};
          --color-primary-text: {{ settings.color_schemes.first.settings.primary_text }};
          --color-secondary-text: {{ settings.color_schemes.first.settings.secondary_text }};
          --color-header-text: {{ settings.color_schemes.first.settings.header_text }};
          --color-link: {{ settings.color_schemes.first.settings.link }};
          --color-button-filled: {{ settings.color_schemes.first.settings.button_filled }};
          --color-button-filled-label: {{ settings.color_schemes.first.settings.button_filled_label }};
          --color-border: {{ settings.color_schemes.first.settings.border }};
        }
      
        /* --- SECTION STYLES USING THEME.LIQUID COLOR VARIABLES --- */
        .section-{{ section.id }} {
          background-color: var(--color-background);
          color: var(--color-primary-text);
          padding: 60px 20px;
          border-bottom: 1px solid var(--color-border);
          font-family: var(--font-body-family);
        }
      
        /* Section Header Alignment (Centered) */
        .section-header {
          text-align: center;
          margin-bottom: 40px;
        }
      
        .section-subheading {
          font-size: calc(var(--font-size-base) * 0.75);
          letter-spacing: 0.15em;
          font-weight: var(--font-weight-bold);
          color: var(--color-secondary-text);
          margin-bottom: 8px;
          text-transform: uppercase;
          font-family: var(--font-body-family);
        }
      
        .section-heading {
          font-size: var(--font-size-heading-large);
          font-weight: var(--font-weight-bold);
          padding-bottom: 10px;
          color: var(--color-header-text);
          font-family: var(--font-heading-family);
          line-height: 1.2;
        }
      
        @media (max-width: 767px) {
          .section-{{ section.id }} {
            padding: 40px 15px;
          }
          
          .section-heading {
            font-size: calc(var(--font-size-heading-large) * 0.8);
          }
          
          .section-subheading {
            font-size: calc(var(--font-size-base) * 0.7);
          }
        }
      
        .posts-grid {
          display: flex;
          flex-direction: column;
          gap: 30px;
          max-width: 1200px;
          margin: 0 auto;
        }
      
        @media (min-width: 768px) {
          .posts-grid {
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
          }
        }
      
        .blog-post-card {
          flex: 1 1 100%; 
          display: flex;
          flex-direction: column;
          text-align: center;
        }
      
        @media (min-width: 768px) {
          .blog-post-card {
            flex-basis: calc(33.333% - 20px); 
            max-width: calc(33.333% - 20px);
          }
        }
        
        /* Post Image/Placeholder */
        .post-image-placeholder {
          background-color: var(--color-border);
          height: 250px; 
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 20px;
          border-radius: 4px;
          overflow: hidden;
        }
      
        .post-image-placeholder svg {
          width: 60px;
          height: 60px;
          color: var(--color-secondary-text);
        }
      
        @media (max-width: 767px) {
          .post-image-placeholder {
            height: 200px;
          }
        }
      
        /* Post Meta and Title */
        .post-meta {
          font-size: calc(var(--font-size-base) * 0.75);
          text-transform: uppercase;
          letter-spacing: 0.1em;
          color: var(--color-secondary-text);
          margin-bottom: 5px;
          font-family: var(--font-body-family);
          font-weight: var(--font-weight-bold);
        }
        
        .post-title {
          font-size: calc(var(--font-size-base) * 1.125);
          font-weight: var(--font-weight-bold);
          text-transform: uppercase;
          margin-bottom: 10px;
          font-family: var(--font-heading-family);
          line-height: 1.3;
        }
        
        .post-title a {
          color: var(--color-header-text);
          text-decoration: none;
          transition: color 0.3s;
        }
        
        .post-title a:hover {
          color: var(--color-link);
        }
        
        .post-excerpt {
          font-size: var(--font-size-base);
          color: var(--color-primary-text);
          margin-bottom: 15px;
          line-height: 1.6;
          font-family: var(--font-body-family);
          font-weight: var(--font-weight-normal);
        }
        
        .read-more-link {
          font-size: calc(var(--font-size-base) * 0.85);
          font-weight: var(--font-weight-bold);
          text-transform: uppercase;
          color: var(--color-link);
          text-decoration: none;
          display: inline-block;
          position: relative;
          padding-bottom: 2px;
          font-family: var(--font-body-family);
        }
      
        .read-more-link::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 1px;
          background-color: var(--color-link);
          transition: background-color 0.3s;
        }
        
        .read-more-link:hover {
          color: var(--color-link);
          opacity: 0.8;
        }
        
        .read-more-link:hover::after {
          background-color: var(--color-link);
          opacity: 0.8;
        }
      
        @media (max-width: 767px) {
          .post-title {
            font-size: calc(var(--font-size-base) * 1);
          }
          
          .post-excerpt {
            font-size: calc(var(--font-size-base) * 0.9);
          }
        }
      
        /* Button Container */
        .button-container {
          text-align: center;
          margin-top: 50px;
        }
        
        /* Discover All Button */
        .discover-button {
          display: inline-block;
          background-color: var(--color-button-filled);
          color: var(--color-button-filled-label);
          padding: 14px 32px;
          text-transform: uppercase;
          font-size: calc(var(--font-size-base) * 0.875);
          font-weight: var(--font-weight-bold);
          letter-spacing: 1px;
          text-decoration: none;
          border-radius: 4px;
          transition: all 0.3s;
          border: 2px solid var(--color-button-filled);
          font-family: var(--font-body-family);
        }
        
        .discover-button:hover {
          background-color: transparent;
          color: var(--color-button-filled);
        }
      
        @media (max-width: 767px) {
          .button-container {
            margin-top: 30px;
          }
          
          .discover-button {
            padding: 12px 24px;
            font-size: calc(var(--font-size-base) * 0.8);
          }
        }
      </style>
      
      {% comment %} 
        The color scheme class will be applied automatically by Shopify 
        when you select a color scheme in the section settings
      {% endcomment %}
      <section class="section-{{ section.id }} color-{{ section.settings.color_scheme.id | default: settings.color_schemes.first.id }}">
        
        {% comment %} Section Header {% endcomment %}
        <div class="section-header">
          <p class="section-subheading">
            {{ section.settings.subheading | escape }}
          </p>
          <h2 class="section-heading">
            {{ section.settings.heading | escape }}
          </h2>
        </div>
      
        {% comment %} Post Grid {% endcomment %}
        <div class="posts-grid">
          {% comment %} 
            Real blog posts loop - fetches actual articles from selected blog
          {% endcomment %}
          {% assign blog_to_use = section.settings.blog %}
          {% if blog_to_use == blank %}
            {% assign blog_to_use = blogs['news'] %}
          {% endif %}
          
          {% assign posts_to_show = section.settings.posts_to_show | at_most: 3 %}
          {% assign blog_articles = blog_to_use.articles | limit: posts_to_show %}
      
          {% if blog_articles.size > 0 %}
            {% for article in blog_articles %}
              <div class="blog-post-card">
                
                {% comment %} Article Image or Placeholder {% endcomment %}
                <a href="{{ article.url }}">
                  <div class="post-image-placeholder">
                    {% if article.image %}
                      <img 
                        src="{{ article.image | img_url: '400x250', crop: 'center' }}" 
                        alt="{{ article.title | escape }}" 
                        style="width: 100%; height: 100%; object-fit: cover;"
                        loading="lazy"
                        height=""
                        width=""
                      >
                    {% else %}
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-12 10a2 2 0 01-2-2v-4a2 2 0 01-2-2V6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 9h.01"></path>
                      </svg>
                    {% endif %}
                  </div>
                </a>
      
                {% if section.settings.show_category %}
                  <p class="post-meta">
                    {{ blog_to_use.title | upcase }}
                  </p>
                {% endif %}
                
                {% comment %} Post Title {% endcomment %}
                <h3 class="post-title">
                  <a href="{{ article.url }}">{{ article.title }}</a>
                </h3>
      
                {% if section.settings.show_date %}
                  <p class="post-meta" style="margin-bottom: 5px;">
                    {{ article.published_at | date: "%b %d, %Y" | upcase }}
                  </p>
                {% endif %}
                
                {% if section.settings.show_excerpt %}
                  <p class="post-excerpt">
                    {% if article.excerpt.size > 0 %}
                      {{ article.excerpt | strip_html | truncate: 100 }}
                    {% else %}
                      {{ article.content | strip_html | truncate: 100 }}
                    {% endif %}
                  </p>
                {% endif %}
                
                {% if section.settings.show_read_more %}
                  <a href="{{ article.url }}" class="read-more-link">
                    Read more
                  </a>
                {% endif %}
      
              </div>
            {% endfor %}
          {% else %}
            {% comment %} Fallback if no articles {% endcomment %}
            {% for i in (1..posts_to_show) %}
              <div class="blog-post-card">
                
                <a href="#">
                  <div class="post-image-placeholder">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-12 10a2 2 0 01-2-2v-4a2 2 0 01-2-2V6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 9h.01"></path>
                    </svg>
                  </div>
                </a>
      
                {% if section.settings.show_category %}
                  <p class="post-meta">
                    BLOG POST
                  </p>
                {% endif %}
                
                <h3 class="post-title">
                  <a href="#" style="color: inherit; text-decoration: none;">BLOG POST TITLE {{ i }}</a>
                </h3>
      
                {% if section.settings.show_date %}
                  <p class="post-meta" style="margin-bottom: 5px;">
                    JAN 01, 2024
                  </p>
                {% endif %}
                
                {% if section.settings.show_excerpt %}
                  <p class="post-excerpt">
                    Here is a short excerpt for blog post {{ i }} that summarizes the content of the article.
                  </p>
                {% endif %}
                
                {% if section.settings.show_read_more %}
                  <a href="#" class="read-more-link">
                    Read more
                  </a>
                {% endif %}
      
              </div>
            {% endfor %}
          {% endif %}
        </div>
      
        {% comment %} Discover All Stories Button {% endcomment %}
        {% if section.settings.button_text != blank %}
          <div class="button-container">
            <a 
              href="{{ section.settings.button_link | default: blog_to_use.url | default: '/blogs/news' }}" 
              class="discover-button"
            >
              {{ section.settings.button_text | escape }}
            </a>
          </div>
        {% endif %}
      
      </section>
      
      {% schema %}
      {
        "name": "Blog Posts Grid",
        "tag": "section",
        "class": "section-blog-posts",
        "settings": [
          {
            "type": "header",
            "content": "Color Scheme"
          },
          {
            "type": "color_scheme",
            "id": "color_scheme",
            "label": "Color scheme",
            "default": "scheme_1"
          },
          {
            "type": "header",
            "content": "Section Header"
          },
          {
            "type": "text",
            "id": "subheading",
            "label": "Subheading",
            "default": "NEWS"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "FROM THE BLOG"
          },
          {
            "type": "range",
            "id": "posts_to_show",
            "min": 1,
            "max": 6,
            "step": 1,
            "label": "Posts to show",
            "default": 3
          },
          {
            "type": "blog",
            "id": "blog",
            "label": "Blog",
            "info": "Select which blog to display posts from"
          },
          {
            "type": "header",
            "content": "Post Content"
          },
          {
            "type": "checkbox",
            "id": "show_category",
            "label": "Show blog name",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "show_date",
            "label": "Show date",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "show_excerpt",
            "label": "Show excerpt",
            "default": false
          },
          {
            "type": "checkbox",
            "id": "show_read_more",
            "label": "Show read more link",
            "default": false
          },
          {
            "type": "header",
            "content": "Button"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button text",
            "default": "DISCOVER ALL OUR STORIES"
          },
          {
            "type": "url",
            "id": "button_link",
            "label": "Button link",
            "info": "If empty, links to the selected blog"
          }
        ],
        "presets": [
          {
            "name": "Blog Posts Grid",
            "category": "Blog",
            "settings": {
              "subheading": "NEWS",
              "heading": "FROM THE BLOG",
              "posts_to_show": 3,
              "show_category": true,
              "show_date": true,
              "show_excerpt": false,
              "show_read_more": false,
              "button_text": "DISCOVER ALL OUR STORIES"
            }
          }
        ]
      }
      {% endschema %}