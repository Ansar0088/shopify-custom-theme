{% schema %}
  {
    "name": "Multiple Media with Text",
    "settings": [
      {
        "type": "header",
        "content": "Layout Settings"
      },
      {
        "type": "select",
        "id": "media_position_desktop",
        "label": "Media position (desktop)",
        "options": [
          {
            "value": "left",
            "label": "Left"
          }, {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "right"
      },
      {
        "type": "select",
        "id": "media_position_mobile",
        "label": "Media position (mobile)",
        "options": [
          {
            "value": "before",
            "label": "Before text"
          }, {
            "value": "after",
            "label": "After text"
          }
        ],
        "default": "before"
      },
      {
        "type": "header",
        "content": "Content Settings"
      }, {
        "type": "text",
        "id": "subheading",
        "label": "Subheading",
        "default": "COLLABORATION"
      }, {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "US X THEM"
      }, {
        "type": "textarea",
        "id": "content",
        "label": "Content",
        "default": "Born from the meeting of a minimalist creative and a timeless design studio, this collection combines refined aesthetics with thoughtful craftsmanship. Their shared vision results in pieces that are both elegant and understated."
      }, {
        "type": "header",
        "content": "Button 1 Settings"
      }, {
        "type": "text",
        "id": "button_1_text",
        "label": "Button 1 Text",
        "default": "DISCOVER"
      }, {
        "type": "url",
        "id": "button_1_link",
        "label": "Button 1 Link"
      }, {
        "type": "select",
        "id": "button_1_style",
        "label": "Button 1 Style",
        "options": [
          {
            "value": "outline",
            "label": "Outline button"
          }, {
            "value": "solid",
            "label": "Solid button"
          }, {
            "value": "link",
            "label": "Link"
          }
        ],
        "default": "solid"
      }, {
        "type": "header",
        "content": "Button 2 Settings"
      }, {
        "type": "text",
        "id": "button_2_text",
        "label": "Button 2 Text",
        "default": "SHOP NOW"
      }, {
        "type": "url",
        "id": "button_2_link",
        "label": "Button 2 Link"
      }, {
        "type": "select",
        "id": "button_2_style",
        "label": "Button 2 Style",
        "options": [
          {
            "value": "outline",
            "label": "Outline button"
          }, {
            "value": "solid",
            "label": "Solid button"
          }, {
            "value": "link",
            "label": "Link"
          }
        ],
        "default": "outline"
      }, {
        "type": "header",
        "content": "Media Settings"
      }, {
        "type": "image_picker",
        "id": "image_1",
        "label": "Image 1 (Purple Snowboards Group - FRONT)"
      }, {
        "type": "range",
        "id": "image_1_rotation",
        "label": "Image 1 Rotation",
        "min": -45,
        "max": 45,
        "step": 1,
        "unit": "deg",
        "default": 0
      }, {
        "type": "image_picker",
        "id": "image_2",
        "label": "Image 2 (Blue Snowboards Group - BACK)"
      }, {
        "type": "range",
        "id": "image_2_rotation",
        "label": "Image 2 Rotation",
        "min": -45,
        "max": 45,
        "step": 1,
        "unit": "deg",
        "default": 0
      }, {
        "type": "header",
        "content": "Color Scheme"
      }, {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#F0F0F0"
      }, {
        "type": "color",
        "id": "text_color",
        "label": "Text Color",
        "default": "#000000"
      }, {
        "type": "color",
        "id": "button_background",
        "label": "Button Background Color",
        "default": "#000000"
      }, {
        "type": "color",
        "id": "button_text_color",
        "label": "Button Text Color",
        "default": "#F0F0F0"
      }
    ],
    "presets": [
      {
        "name": "Multiple Media with Text (Custom Grid)",
        "category": "Custom Sections"
      }
    ]
  }
{% endschema %}

<style>
  /* --- BASE SECTION STYLES --- */
  .collaboration-section {
    background-color: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
    overflow: hidden;
    padding: 80px 60px;
  }

  .collaboration-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 60px;
  }

  .collaboration-container.media-left {
    flex-direction: row;
  }

  .collaboration-container.media-right {
    flex-direction: row-reverse;
  }

  /* --- CONTENT STYLES (Left Column) --- */
  .collaboration-content-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 450px;
  }

  .section-subheading {
    font-size: 14px;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 10px;
    font-family: sans-serif;
    opacity: 1;
  }

  .section-heading {
    font-size: 52px;
    font-weight: 400;
    margin-bottom: 25px;
    font-family: serif;
    line-height: 1.1;
  }

  .section-content {
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 35px;
    font-family: sans-serif;
    opacity: 0.9;
  }

  /* Button Styles */
  .button-group {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }

  .section-button {
    padding: 15px 35px;
    font-size: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-family: sans-serif;
    border: 1px solid{{ section.settings.button_background }};
    transition: all 0.3s ease;
    display: inline-block;
    text-decoration: none;
  }

  .button-solid {
    background-color: {{ section.settings.button_background }};
    color: {{ section.settings.button_text_color }}
     !important;
  }

  .button-outline {
    background-color: transparent;
    border-color: {{ section.settings.button_background }};
    color: {{ section.settings.button_background }};
  }

  .button-solid:hover {
    opacity: 0.85;
  }

  .button-outline:hover {
    background-color: {{ section.settings.button_background }};
    color: {{ section.settings.button_text_color }}
     !important;
  }

  /* --- CUSTOM IMAGE GRID STYLES (Right Column) --- */

  .collaboration-images-wrapper {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .collaboration-images-panel {
    /* display: grid; */
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    min-height: 400px;
    width: 600px;
    position: relative;
  }

  .collaboration-image-1,
  .collaboration-image-2 {
    grid-column: 1 / span 2;
    grid-row: 1 / span 2;
    width: 100%;
    height: 100%;
    overflow: hidden;
    /* Apply the white "canvas" padding to the container */
    padding: 20px;
    /* Apply white background to containers */
  }

  /* Position Image 1 (Purple Snowboards - FRONT) */
  .collaboration-image-1 {
    justify-self: start;
    align-self: center;
    width: 50%;
    height: auto;
    z-index: 2;
    /* Custom positioning to match your request */
    margin-left: 20%;
    margin-top: -100px;
  }

  /* Position Image 2 (Blue Snowboards - BACK) */
  .collaboration-image-2 {
    justify-self: end;
    align-self: end;
    width: 60%;
    height: auto;
    z-index: 1;
    margin-bottom: -40px;
    margin-right: 0;
  }

  .collaboration-image-1 img,
  .collaboration-image-2 img {
    width: 100%;
    height: auto;
    display: block;
  }


  /* --- RESPONSIVE STYLES --- */
  @media (max-width: 1024px) {
    .collaboration-section {
      padding: 60px 40px;
    }
    .collaboration-images-panel {
      width: 500px;
      min-height: 500px;
    }
    .collaboration-image-1 {
      margin-left: 10%;
      margin-top: -50px;
    }
    .collaboration-image-2 {
      margin-bottom: -20px;
    }
    .section-heading {
      font-size: 40px;
    }
  }

  @media (max-width: 768px) {
    .collaboration-container {
      flex-direction: column;
      padding: 40px 20px;
      gap: 30px;
    }

    .collaboration-container.media-left,
    .collaboration-container.media-right {
      flex-direction: column;
    }

    /* Mobile ordering */
    .collaboration-content-panel {
      order: {%- if section.settings.media_position_mobile == 'before' -%}
        2
      {%- else -%}
      1
    {%- endif -%}
    ;
      padding: 20px 0;
      max-width: 100%;
      text-align: center;
      align-items: center;
    }

    .collaboration-images-wrapper {
      order: {%- if section.settings.media_position_mobile == 'before' -%}
        1
      {%- else -%}
      2
    {%- endif -%}
    ;
      padding-top: 20px;
    }

    .collaboration-images-panel {
      display: flex;
      flex-direction: column;
      min-height: auto;
      width: 100%;
      max-width: 450px;
    }

    /* Reset positioning and stacking for mobile */
    .collaboration-image-1,
    .collaboration-image-2 {
      position: relative;
      width: 100%;
      margin: 0 auto;
      /* Changed margin-bottom to 0 */
      justify-self: unset;
      align-self: unset;
      z-index: auto;
    }

    /* Stacking order on mobile: Purple (Image 1) on top, Blue (Image 2) below */
    .collaboration-image-1 {
      order: 1;
    }
    .collaboration-image-2 {
      order: 2;
    }

    .section-button {
      width: 100%;
      text-align: center;
    }
    .button-group {
      flex-direction: column;
    }
  }
</style>

<div class="collaboration-section" style="background-color: #F0F0F0;">
  <div class="collaboration-container media-{{ section.settings.media_position_desktop }}">

    <div class="collaboration-content-panel">
      {% if section.settings.subheading != blank %}
        <p class="section-subheading">{{ section.settings.subheading | upcase }}</p>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h2 class="section-heading">{{ section.settings.heading }}</h2>
      {% endif %}

      {% if section.settings.content != blank %}
        <div class="section-content">{{ section.settings.content }}</div>
      {% endif %}

      <div class="button-group">
        {% if section.settings.button_1_text != blank %}
          <a href="{{ section.settings.button_1_link }}" class="section-button button-{{ section.settings.button_1_style }}">
            {{ section.settings.button_1_text | upcase }}
          </a>
        {% endif %}

        {% comment %}Only render button 2 if the text is not blank (i.e., not removed by the user) {% endcomment %}
        {% if section.settings.button_2_text != blank %}
          <a href="{{ section.settings.button_2_link }}" class="section-button button-{{ section.settings.button_2_style }}">
            {{ section.settings.button_2_text | upcase }}
          </a>
        {% endif %}
      </div>
    </div>

    <div class="collaboration-images-wrapper">
      <div class="collaboration-images-panel">

        {% comment %}
          Image 2 (Blue Snowboards Group) - BACK IMAGE. This is rendered first to sit lower in the Z-index.
        {% endcomment %}
        {% if section.settings.image_2 != blank %}
          <div class="collaboration-image-2" style="transform: rotate({{ section.settings.image_2_rotation }}deg);">
            <img
              src="{{ section.settings.image_2 | image_url: width: 600 }}"
              alt="{{ section.settings.heading }}"
              loading="lazy">
          </div>
        {% endif %}

        {% comment %}
          Image 1 (Purple Snowboards Group) - FRONT IMAGE. This is rendered second to sit higher in the Z-index.
        {% endcomment %}
        {% if section.settings.image_1 != blank %}
          <div class="collaboration-image-1" style="transform: rotate({{ section.settings.image_1_rotation }}deg);">
            <img
              src="{{ section.settings.image_1 | image_url: width: 800 }}"
              alt="{{ section.settings.heading }}"
              loading="lazy">
          </div>
        {% endif %}

      </div>
    </div>

  </div>
</div>